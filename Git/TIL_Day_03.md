> 2022년 05월 21일 토요일

# Git workflow

### 1. 원격 저장소 소유권이 있는 경우 (shared repository model)

> 원격 저장소가 자신의 소유이거나 collaborator로 등록되어 있는 경우

- master에 직접 개발하는 것이 아니라, **기능별로** 브랜치를 나누어 개발함
- Pull Request를 같이 사용하여 팀원 간 작업 내용에 대한 소통 진행
- 작업 흐름

1.  원격 저장소에서 로컬 저장소로 clone

2.  각자 담당한 기능과 역할에 맞는 branch 생성 및 구현

3.  구현 완료 시 원격 저장소에 **해당 브랜치를 push**

4.  원격 저장소에 각 브랜치들이 보낸 기능이 등록됨

5.  각자 Pull Request를 통해 브랜치를 master에 반영해(merge)달라는 요청 보냄 (팀원들과 코드리뷰)

6.  충분한 리뷰 후 merge가 완료되면 **원격 저장소에서** 병합이 완료된 기능 브랜치는 불필요하므로 **삭제**

7.  로컬 저장소에서 master 브랜치로 switch

8.  원격 저장소에서 merge된 master 브랜치를 받아옴 **(pull)**

   ```
      $ git pull origin master
   ```

9.  기능 구현 브랜치 로컬에서 삭제 

10.  과정 반복



--------------------------------



### 2. 원격 저장소 소유권이 없는 경우 (Fork & Pull model)

> 오픈 프로젝트와 같이 자신의 소유가 아닌 원격 저장소인 경우

- master에 직접 개발하는 것이 아니라, **기능을 구현할** 브랜치를 만들어 개발
- 작업 흐름

1.  소유권이 없는 원격  저장소를 **fork** 를 통해 자신의 원격 저장소로 복제

2.  **복제된 자신의 원격 저장소** (origin)를 로컬 저장소로 clone

3.  로컬 저장소와 **원본 원격 저장소** 를 동기화 하기 위해서 연결

   ```
    // 원본 원격 저장소에 대한 이름은 upstream으로 붙이는 것이 관례 
    $ git remote add upstream 원본원격저장소 주소
   ```

4.  작업할 기능에 대한 branch 생성하고 기능구현

5.  복제된 자신의 원격 저장소 **(origin)에 ** 해당 브랜치를 **push**

6.  **복제된 자신의 원격 저장소에는** master와 해당 브랜치가 등록됨

7.  Pull Request를 통해 기능을 구현한 브랜치를 **원본 원격 저장소(upstream)의 master** 에 반영해 달라는 요청을 보냄

8.  upstream의 master에 브랜치가 병합되면, 복제된 자신의 원격 저장소(origin)에서 기능 브랜치는 삭제 함. 그리고 사용자는 **로컬에서** master브랜치로 이동

9.  병합이 완료된 **원본 원격저장소(upstream)의 master** 내용을 로컬 저장소에 받아옴 **(pull)**

   ```
   $ git pull upstream master
   ```

10.  기능 구현 브랜치 로컬에서 삭제 

11.  과정 반복

